(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7322:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(5155),i=r(2115);function s(){let[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)(""),[d,o]=(0,i.useState)(!1),l=async()=>{if(!r.trim())return;let e={sender:"user",text:r};t(t=>[...t,e]),s(""),o(!0);try{let e=await fetch("https://script.google.com/macros/s/****************/exec",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({prompt:r})});if(!e.ok){let t=await e.text().catch(()=>"");throw Error(t||`HTTP ${e.status}`)}let n=await e.text(),i=n;try{let e=JSON.parse(n);e&&"object"==typeof e&&(i=e.reply??e.response??JSON.stringify(e))}catch{}let s={sender:"bot",text:i};t(e=>[...e,s])}catch(r){let e={sender:"bot",text:`⚠️ エラーが発生しました: ${r.message}`};t(t=>[...t,e])}finally{o(!1)}};return(0,n.jsxs)("div",{style:a.container,children:[(0,n.jsx)("h2",{style:a.header,children:"GAS連携チャット"}),(0,n.jsxs)("div",{style:a.chatArea,children:[e.map((e,t)=>(0,n.jsx)("div",{style:{...a.message,alignSelf:"user"===e.sender?"flex-end":"flex-start",background:"user"===e.sender?"#0078ff":"#e0e0e0",color:"user"===e.sender?"#fff":"#000"},children:e.text},t)),d&&(0,n.jsx)("div",{style:{fontStyle:"italic",color:"#555"},children:"GASから応答を待っています..."})]}),(0,n.jsxs)("div",{style:a.inputRow,children:[(0,n.jsx)("input",{type:"text",placeholder:"質問を入力...",value:r,onChange:e=>s(e.target.value),onKeyDown:e=>"Enter"===e.key&&l(),style:a.input}),(0,n.jsx)("button",{onClick:l,style:a.button,disabled:d,children:"送信"})]})]})}let a={container:{display:"flex",flexDirection:"column",height:"100vh",fontFamily:"sans-serif",background:"#f8f9fa"},header:{background:"#0078ff",color:"white",padding:"10px",textAlign:"center"},chatArea:{flex:1,display:"flex",flexDirection:"column",padding:"10px",overflowY:"auto",gap:"8px"},message:{padding:"8px 12px",borderRadius:"10px",maxWidth:"70%",wordBreak:"break-word"},inputRow:{display:"flex",padding:"10px",borderTop:"1px solid #ddd",background:"white"},input:{flex:1,padding:"8px",borderRadius:"6px",border:"1px solid #ccc",marginRight:"8px"},button:{background:"#0078ff",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer"}}},8646:(e,t,r)=>{Promise.resolve().then(r.bind(r,7322))}},e=>{e.O(0,[441,512,358],()=>e(e.s=8646)),_N_E=e.O()}]);